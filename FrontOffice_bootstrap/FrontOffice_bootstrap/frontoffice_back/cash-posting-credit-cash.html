<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Chain Responsive Bootstrap3 Admin</title>

        <link href="../css/style.default.css" rel="stylesheet">
        <link href="../css/select2.css" rel="stylesheet" />
        <link href="../css/style.datatables.css" rel="stylesheet">
        <link href="../css/dataTables.responsive.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="js/html5shiv.js"></script>
        <script src="js/respond.min.js"></script>
        <![endif]-->
        
        <link href="../css/Table.css" rel="stylesheet">
        <link href="../css/Tablepage.css" rel="stylesheet">

        <link href="../css/frontoffice/datatable.css" rel="stylesheet">
        <style>
			.panel-body { padding: 10px; }
            .panel-footer { padding: 10px; }
            .contentpanel {  padding: 10px 10px;}
            .form-group {margin-bottom:4px;}
            .panel-heading {padding: 8px;}				
			.panel-title {
				font-size: 14px;
			}
            .btn-group { margin-bottom: 0px;}
			.panel-group .panel-heading {
 			   padding: 8px;
			}
			.panel-group .panel-heading .panel-title {
				font-size: 14px;
			}			
			.form-control {
				padding: 6px;
			}								
			hr{margin-top: 10px;margin-bottom: 10px;}
			.right-1px{
				padding-right: 1px;
			}
			.left-1px{
				padding-left: 1px;
			}			
			.leftright-1px{
				padding-right: 1px;
				padding-left: 1px;
			}
			.btn {
				border-radius: 3px;
				line-height: 21px;
				transition: all 0.2s ease-out 0s;
				padding: 4px 15px;
				border-width: 0px;
			}		
		
		
	        .dataTable .selected{ background:rgb(217, 237, 247);}
			.form-info {
				border:none;
				height: auto;
				width: 100%;
				box-shadow: none;
			}			
			.center {
				text-align:center;
			}			
			.right {
				text-align:right;
			}
			.tblchecked {width:2%;}			
			.dcode {width:5%;}
			.text {width:20%;}
			.datetime {width:14%;}
			.debit {width:10%;text-align:right;color:#03C;}			
			.credit {width:10%;text-align:right;color: #90C;}
			.dropdown-menu > li > a {
				padding: 2px 10px;
				color: #666;
			}			
			
        </style>
        
    </head>

    <body>
        <div class="contentpanel contentpanel-mediamanager">
                <div class="media-options">
                    <div class="pull-left">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">应付</label>
                            <div class="col-sm-9">
                                <div class="input-group col-sm-8">
                                    <input type="text" name="pay" class="form-info center" readOnly="true"/>
                                </div><!-- input-group -->                                
                            </div>
                        </div><!-- form-group -->
                    </div>
                    <div class="pull-right">
                        <div class="btn-toolbar">
                            <div class="btn-group">
                                <button id ="btn-ok" type="reset" class="btn btn-primary btn-sm"><i class="fa fa-envelope mr5"></i> 确认</button>
                            </div>
                            <div class="btn-group">
                                <button id ="btn-cancel" type="reset" class="btn btn-default btn-sm"><i class="fa fa-envelope mr5"></i> 取消</button>
                            </div>
                        </div><!-- btn-toolbar -->
                    </div>
                </div><!-- media-options -->
                <hr>
				<div class="panel-body">
                    <div class="row">
                        <div class="form-group">
                            <label class="col-sm-3 control-label"><strong>科目</strong></label>
                            <div class="col-sm-2 right-1px">
                                <input type="text" name="dcode" class="form-control" readOnly/>
                            </div>
                            <div class="col-sm-6 left-1px">
                                <input type="text" name="text" class="form-control" readOnly/>
                            </div>
                        </div><!-- form-group --> 
                    </div><!-- row -->

                    <div class="row">
                        <div class="form-group">
                            <label class="col-sm-3 control-label"><strong>金额/找零</strong></label>
                            <div class="col-sm-3 right-1px">
                                <input type="text" name="credit" class="form-control" onkeyup="computer()"/>
                            </div>
                            <div class="col-sm-3 left-1px">
                                <input type="text" name="change" class="form-control" readOnly/>
                            </div>
                        </div><!-- form-group -->
                    </div><!-- row -->
                    <div class="row">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">备注</label>
                            <div class="col-sm-9">
                                <div class="input-group col-sm-8">
                                    <input type="text" class="form-control" name="text" />
                                </div><!-- input-group -->                                
                            </div>
                        </div><!-- form-group -->
                    </div><!-- row -->                    
				</div>                
                
                
                <div class="table-responsive">
                    <table id="tblDict" class="table table-hover table-dark responsive mb30 table-huasheng">
                        <thead>
                            <tr>
                                <th >代码</th>
                                <th >名称</th>
                                <th >单价</th>
                                <th >助记码</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>                                
        		</div>
                
        </div>
        <script src="../js/jquery-1.11.1.min.js"></script>
        <script src="../js/jquery-migrate-1.2.1.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        
        <script src="../js/jquery.dataTables.min.js"></script>
        <script src="../js/dataTables.bootstrap.js"></script>
        <script src="../js/dataTables.responsive.js"></script>
        <script src="../js/select2.min.js"></script>
        <script src="../js/frontoffice/table-huasheng.js"></script>
		
		<script src="../js/frontoffice/cookies.js"></script>
        <script src="../js/frontoffice/jquery.contextmenu.r2.js"></script>        
        <script src="../js/frontoffice/artDialog.min.js"></script>
        <script src="../js/frontoffice/artDialog.plugins.min.js"></script>
        <script src="../js/frontoffice/jquery.artDialog.min.js"></script>
        
        <script src="../js/frontoffice/artDialog.source.js?skin=default" type="text/javascript"></script>
        <script src="../js/frontoffice/iframeTools.source.js" type="text/javascript"></script>        
      
   
	    <script>
		
			$(document).ready(function () { 
				$(".table-huasheng").alterBgColor({ style: "4" }).find("th"); //可以链式操作
				var jsonArg = {};
				
				retrieve_get_barcode_dict();
				
				
				//var alinarg = getCookieValue("alinarg");
				//alert( alinarg );

			  
			});			
		
			function retrieve_get_barcode_dict(){
				//向后台请求客人帐数据
				var jsonstr;
				jQuery.ajax( {  
					  type : 'GET',  
					  url : 'data/get_barcode_dict.txt',  
					  data : jsonstr,
					  dataType : 'json',  
					  success : function(data) {  
							filltblDict( data );
							trClick();
					  },  
					  error : function(data) {  
							alert("json get_barcode_dict error");
					  }  
				  });
				  
			}
		
			function filltblDict( jsonData ){		
                var exTable = jQuery('#tblDict').DataTable({
                    responsive: true,
					"bDestroy":true,
					"fnInitComplete": function(oSettings) {
						jQuery('#tblDict').css("width","100%");
						jQuery('#tblDict_info').css("width","auto");
						jQuery('#tblDict_paginate').css("width","auto");
					},
					//测试
                    "bLengthChange":false,
                    "bPaginate":false,
	            	"bFilter": false,
					"bSort":false,
					//
					
                    "data": jsonData,
					
                    "columns": [
                        { "data": "dcode" },
                        { "data": "text" },
                        { "data": "price" },
                        { "data": "text2" }
                    ],
                    "order": [[1, 'asc']],
				 
                });

			};
			
			
			// 返回数据给A页面
			document.getElementById('btn-ok').onclick = function () {
				art.dialog.data('bParameter','{"ok":"1",' + selectRows () +'}' );// 存储数据
				art.dialog.close();
			};

			document.getElementById('btn-cancel').onclick = function () {
				art.dialog.data('bParameter','{"ok":"0"}');// 取消
				art.dialog.close();
			};
			

			function add_parameter(sParameter){
				var t = $('#tblDict tbody tr');
				$('#tblDict tbody tr').each( function() {
					var this_tr = $(this);    //本行的tr
					var chk=this_tr.find('td').eq(0).find('input');
					var nTds = $('td', this);
					if(sParameter.indexOf($(nTds[1]).text()+',') > 0){
						chk.attr("checked",true);
						this_tr.addClass("selected");   
					}
				} );
			}
			function trClick(){
				$("#tblDict>tbody>tr").click(function() {
					var nTds = $('td', this);
				 	//alert( $(nTds[1]).text() );
					document.getElementsByName("dcode")[0].value = $(nTds[0]).text();
					document.getElementsByName("text")[0].value = $(nTds[1]).text();
				 
				});				
			}
			
			function computer(){
				var pay = parseFloat(document.getElementsByName("pay")[0].value)
				var credit = parseFloat(document.getElementsByName("credit")[0].value)
				
				document.getElementsByName("change")[0].value = credit - pay;
			}
			






       </script>
       
    </body>
</html>
